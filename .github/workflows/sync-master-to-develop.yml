name: Sync Master to Develop

on:
  # 監聽合併到 master 的 PR
  pull_request:
    types: [closed]
    branches:
      - master

permissions:
  contents: write
  pull-requests: write

jobs:
  sync_job:
    # 確保 PR 被合併後才執行
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Develop Branch
        uses: actions/checkout@v4
        with:
          ref: develop

      - name: Merge Master into Develop
        run: |
          git config --global user.name  "GitHub Action"
          git config --global user.email "action@github.com"
          git pull --rebase origin master
          git push origin develop
